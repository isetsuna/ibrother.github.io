---
layout: post
title: "jekyll-4"
description: 
headline: 
modified: 2014-12-16
category: personal
tags: []
image: 
  feature: 
comments: true
mathjax: 
---

跟着第三篇做完后，大家是否有了一些感(TU)悟(CAO)，这一篇我们将开始写自己的第一篇博客。先看看默认的博客内容是怎么写的,你会发现开头有这么几行：

```html
---
layout: post
title:  "Welcome to Jekyll!"
date:   2014-12-15 16:17:45
categories: jekyll update
---
```
我们把文章开头两行`---`包围起来的内容叫做头信息，jekyll会处理带有头信息的文件。照虎画猫，我们也冻手写一个，我直接用了码农圈的介绍，文件名为`2014-12-16-welcome-to-coderq.md`，内容如下：

```html
---
layout: post
title:  "欢迎来到码农圈"
date:   2014-12-16 15:17:45
categories: coderq
---

欢迎来到「码农圈」论坛，这是一个面向程序员交流分享的下一代社区。在这里你可以畅所欲言诸如技术、人生、梦想乃至情感。

希望大家能够多多分享自己在技术上的心得、正在做的有趣事物、交流想法，在这里找到朋友甚至新的机会。最重要的是，在这一切的过程中，保持对他人的友善。
```

现在博客的目录结构变成了下面这个样子：

```
|- about.md
|- _config.yml
|
|- css-|
|      |- main.scss
|
|- feed.xml
|
|- _includes-|
|            |- footer.html
|            |- header.html
|            |- head.html
|
|- _layouts-|
|           |- default.html
|           |- page.html
|           |- post.html
|
|- _posts-|
|         |- 2014-12-15-welcome-to-jekyll.markdown
|         |- 2014-12-16-welcome-to-coderq.md
|
|- _sass-|
|        |- _base.scss
|        |- _layout.scss
|        |- _syntax-highlighting.scss
|
|- _site
```

我们刷新浏览器看一下，嘿，有了！看到这里有(WANG)远(XIANG)见(ZHENG)的同学就会脑洞大开，如果我文章写的(BU)特(KE)别(NENG)多，即使有摘要，但是首页也会特别长，肿么办呢？

所以本篇将会引入[分页器][1]这个东东。我们在主配置文件`_config.yml`中加上下面两行：

```
paginate:    1
paginate_path: "page:num"
```

第一行指定多少篇文章分为一页，我这里为了演示就设置为1。好吧，是我太懒了T\_T
第二行自定义分页器的路径，比如我的博客第二页就是http://jekyllrb.com/docs/pagination/<http://blog.ibrother.me/page/2/>。

这个时候就需要用到jekyll给的分页器文档中的代码,思路是这样的，我们在首页`index.html`中实现两套布局，一套是原来没有分页的，如果我们在主配置文件设置了分页就用另一套加了分页器的布局。修改后的首页代码如下：

```html
---
layout: default
---

<div class="home">

  <h1 class="page-heading">Posts</h1>

  <ul class="post-list">
    {% if site.paginate %}
    {% for post in paginator.posts %}
      <li>
        <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>

        <h2>
          <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
        </h2>
        {% if site.excerpt_separator %}
        <p>{{ post.excerpt }}<p>
        {% else %}
        <p>{{ post.content }}</p>
        {% endif %}
      </li>
    {% endfor %}
    <div class="pagination">
    {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path }}" class="previous">Previous</a>
    {% else %}
    <span class="previous">Previous</span>
    {% endif %}
    <span class="page_number ">Page: {{ paginator.page }} of {{ paginator.total_pages }}</span>
    {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path }}" class="next">Next</a>
    {% else %}
    <span class="next ">Next</span>
    {% endif %}
    </div>
    {% else %}
    {% for post in site.posts %}
      <li>
        <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>

        <h2>
          <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
        </h2>
        {% if site.excerpt_separator %}
        <p>{{ post.excerpt }}<p>
        {% else %}
        <p>{{ post.content }}</p>
        {% endif %}
      </li>
    {% endfor %}
    {% endif %}
  </ul>

  <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p>

</div>
```

不难看出，分页器布局只是遍历的时候不是在所有的文章中遍历，最后在无序列表后面加了前一页和后一页的导航按钮。刷新一下浏览器,看看大(SNAG)快(XIN)人(BING)心(KUANG)效果出来了没？

[1]: http://jekyllrb.com/docs/pagination/

